                                <!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>AI Assistant</title>

    <!-- Google Icons -->
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded" rel="stylesheet" />

    <style>
        body {
            margin: 0;
            padding: 0;
            background: #0d0b1f;
            font-family: 'Poppins', Arial, sans-serif;
            color: white;
        }

        .app-header { text-align: center; padding: 45px 20px 10px; }
        .heading {
            font-size: 30px;
            font-weight: 700;
            background: linear-gradient(90deg, #c77dff, #ff72e1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .sub-heading { font-size: 16px; color: #cfcfcf; margin-top: -5px; }

        .suggestions { list-style: none; padding: 0 20px; }
        .suggestions-item {
            background: #131228; padding: 18px; border-radius: 18px;
            margin: 12px 0; display: flex; justify-content: space-between;
            align-items: center; cursor: pointer; transition: 0.15s ease;
        }
        .suggestions-item:hover { background: #1b1934; }

        .suggestions-item p { margin: 0; font-size: 16px; color: #eaeaea; }
        .icon {
            background: #1f1b3a; padding: 10px; border-radius: 50%;
            font-size: 22px; color: #d46bff;
        }

        .chats-container {
            padding: 20px; margin-bottom: 130px;
            overflow-y: auto; max-height: calc(100vh - 260px);
        }

        .message {
            padding: 12px 15px; border-radius: 15px;
            margin-bottom: 14px; max-width: 85%;
            font-size: 14px; line-height: 1.5;
        }
        .user-message { background: #2c2c4a; margin-left: auto; border-bottom-right-radius: 3px; }
        .bot-message  { background: #1b1b35; margin-right: auto; border-bottom-left-radius: 3px; }

        .prompt-container {
            position: fixed; bottom: 0; width: 100%; background: #0d0b1f;
            padding: 12px 18px 20px;
        }
        .prompt-wrapper {
            display: flex; align-items: center; gap: 10px;
        }
        .prompt-input {
            flex: 1; padding: 14px 16px; border-radius: 20px;
            border: none; outline: none; background: #1c1a33;
            color: white; font-size: 15px;
        }

        .prompt-actions button,
        #theme-toggle-btn,
        #delete-chats-btn {
            background: #1c1a33; padding: 12px; border-radius: 50%;
            border: none; color: white; font-size: 22px; cursor: pointer;
            transition: 0.15s;
        }
        .prompt-actions button:hover,
        #theme-toggle-btn:hover,
        #delete-chats-btn:hover { background: #262347; }

        #file-input { display: none; }
    </style>
</head>

<body>

<header class="app-header">
    <h1 class="heading">Halo, selamat datang di Ai nya Lyy</h1>
    <h4 class="sub-heading">Ada yang bisa aku bantu? ðŸ«¶</h4>
</header>

<ul class="suggestions">
    <li class="suggestions-item"><p class="text">Kapan Lyy Hultah?</p><span class="icon material-symbols-rounded">calendar_month</span></li>
    <li class="suggestions-item"><p class="text">Rekomendasi film terbaru</p><span class="icon material-symbols-rounded">movie</span></li>
    <li class="suggestions-item"><p class="text">Cara membuat kue bolu</p><span class="icon material-symbols-rounded">cake</span></li>
    <li class="suggestions-item"><p class="text">Tips belajar efektif</p><span class="icon material-symbols-rounded">school</span></li>
</ul>

<div class="chats-container" id="chatBox"></div>

<div class="prompt-container">
    <div class="prompt-wrapper">
        <input id="input" type="text" placeholder="Tanyakan sesuatu ke aku, Lyy..." class="prompt-input" required />
        <div class="prompt-actions">
            <input type="file" id="file-input" />
            <button id="add-file-btn" class="material-symbols-rounded">attach_file</button>
            <button id="send-prompt-btn" class="material-symbols-rounded">arrow_upward</button>
        </div>
        <button id="theme-toggle-btn" class="material-symbols-rounded">light_mode</button>
        <button id="delete-chats-btn" class="material-symbols-rounded">delete</button>
    </div>
</div>

<!-- SCRIPT -->
<script>
const API_KEY = "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";

const chatBox = document.getElementById("chatBox");
const input = document.getElementById("input");
const sendBtn = document.getElementById("send-prompt-btn");
const addFileBtn = document.getElementById("add-file-btn");
const fileInput = document.getElementById("file-input");
const themeBtn = document.getElementById("theme-toggle-btn");
const deleteBtn = document.getElementById("delete-chats-btn");

const SYSTEM_LYY = "Kamu adalah AI milik Lyy. Gaya jawabannya lembut, cute, dan ramah.";

let chatHistory = [
    { role: "system", content: SYSTEM_LYY }
];

// Tambah pesan ke UI
function addMessage(text, isUser) {
    const div = document.createElement("div");
    div.className = "message " + (isUser ? "user-message" : "bot-message");
    div.innerHTML = text;
    chatBox.appendChild(div);
    chatBox.scrollTop = chatBox.scrollHeight;
}

async function sendMessage() {
    const text = input.value.trim();
    if (!text) return;

    addMessage(text, true);
    input.value = "";

    const msg = text.toLowerCase();

    if (msg.includes("kapan lyy hultah") || msg.includes("ultah lyy")) {
        addMessage("Hultah Lyy itu tanggal <b>03 Desember</b> âœ¨ðŸŽ‚ðŸ’—", false);
        return;
    }

    addMessage("Mengetik...", false);
    const loading = chatBox.lastChild;

    chatHistory.push({ role: "user", content: text });

    try {
        const res = await fetch("https://api.openai.com/v1/chat/completions", {
            method: "POST",
            headers: {
                "Authorization": `Bearer ${API_KEY}`,
                "Content-Type": "application/json"
            },
            body: JSON.stringify({
                model: "gpt-4.1-mini",
                messages: chatHistory
            })
        });

        const data = await res.json();
        loading.remove();

        const botMsg = data.choices?.[0]?.message?.content || "(Error: respon kosong)";
        addMessage(botMsg, false);

        chatHistory.push({ role: "assistant", content: botMsg });

    } catch (err) {
        loading.remove();
        addMessage("(Error: gagal mengambil jawaban)", false);
    }
}

sendBtn.onclick = sendMessage;

input.addEventListener("keypress", e => {
    if (e.key === "Enter") {
        e.preventDefault();
        sendMessage();
    }
});

document.querySelectorAll(".suggestions-item").forEach(item => {
    item.onclick = () => {
        input.value = item.querySelector(".text").textContent;
        sendMessage();
    };
});

addFileBtn.onclick = () => fileInput.click();

fileInput.onchange = () => {
    if (fileInput.files.length) {
        addMessage(`ðŸ“Ž File dipilih: <b>${fileInput.files[0].name}</b>`, true);
    }
};

themeBtn.onclick = () => {
    document.body.style.background =
        document.body.style.background === "white" ? "#0d0b1f" : "white";
};

deleteBtn.onclick = () => {
    chatBox.innerHTML = "";
    chatHistory = [{ role: "system", content: SYSTEM_LYY }];
    addMessage("Percakapan berhasil dihapus.", false);
};
</script>

</body>
</html>
